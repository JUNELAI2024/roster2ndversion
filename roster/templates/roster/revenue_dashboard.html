{% extends 'roster/base.html' %}

{% block title %}Revenue Dashboard{% endblock %}

{% block content %}
<style>
    body {
        background-color: #f4f4f4; /* Light background for a clean look */
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    }
    .header {
        display: flex;
        justify-content: space-around; /* Distribute space between items */
        margin-bottom: 20px; /* Space below header */
    }
    .header div {
        background-color: #ffffff; /* White background for each metric */
        border-radius: 10px; /* Rounded corners */
        padding: 20px; /* Padding for content */
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Shadow for depth */
        text-align: center; /* Center text */
        flex: 1; /* Allow items to grow */
        margin: 0 10px; /* Space between items */
    }
    .header h2 {
        margin: 0; /* Remove default margin */
        color: #34495e; /* Darker color for readability */
    }
    .charts {
        display: flex; /* Flexbox for side-by-side charts */
        justify-content: space-between; /* Space between charts */
        flex-wrap: nowrap; /* Prevent wrapping */
    }
    .chart-container {
        flex: 1; /* Allow each chart container to grow */
        margin: 0 10px; /* Space between charts */
        max-width: 48%; /* Ensure charts stay within 48% of the container */
    }
    canvas {
        background-color: #ffffff; /* White background for charts */
        border-radius: 10px; /* Rounded corners */
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Shadow for depth */
        flex: 1; /* Allow canvas to grow */
        margin: 0 10px; /* Space between charts */
    }
</style>

<div class="header">
    <div>
        <h2>Total Revenue: $<span id="totalRevenue">0.00</span></h2>
    </div>
    <div>
        <h2>Average Revenue per Day: $<span id="avgRevenue">0.00</span></h2>
    </div>
    <div>
        <h2>Top Payment Method: <span id="topPaymentMethod">N/A</span></h2>
    </div>
</div>

<div class="charts">
    <canvas id="revenueTrendChart" width="400" height="200"></canvas>
    <canvas id="paymentMethodTrendChart" width="400" height="200"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Sample data (replace with your actual data)
    const revenueData = [500, 700, 600, 800, 900, 750, 850]; // Daily revenue
    const paymentMethods = ['Amex', 'Visa', 'Mastercard', 'Cash'];
    const paymentMethodData = [3000, 2000, 1500, 1000]; // Corresponding revenue

    // Update dashboard metrics
    document.getElementById('totalRevenue').innerText = (revenueData.reduce((a, b) => a + b, 0)).toFixed(2);
    document.getElementById('avgRevenue').innerText = (revenueData.reduce((a, b) => a + b, 0) / revenueData.length).toFixed(2);
    document.getElementById('topPaymentMethod').innerText = paymentMethods[0]; // Placeholder

    // Revenue Trend Over Time
    const ctx1 = document.getElementById('revenueTrendChart').getContext('2d');
    const revenueTrendChart = new Chart(ctx1, {
        type: 'line',
        data: {
            labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6', 'Day 7'],
            datasets: [{
                label: 'Revenue Over Time',
                data: revenueData,
                borderColor: 'rgba(75, 192, 192, 1)',
                fill: false,
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

    // Payment Method Revenue Trend
    const ctx2 = document.getElementById('paymentMethodTrendChart').getContext('2d');
    const paymentMethodTrendChart = new Chart(ctx2, {
        type: 'bar',
        data: {
            labels: paymentMethods,
            datasets: [{
                label: 'Revenue by Payment Method',
                data: paymentMethodData,
                backgroundColor: 'rgba(153, 102, 255, 0.5)',
                borderColor: 'rgba(153, 102, 255, 1)',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>
{% endblock %}